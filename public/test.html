<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éƒ¨ç½²æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            background: #f8f9fa;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Netlifyéƒ¨ç½²æµ‹è¯•</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•ä½ çš„Netlifyéƒ¨ç½²æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
        
        <h2>ğŸ“‹ æµ‹è¯•é¡¹ç›®</h2>
        
        <div class="test-result">
            <h3>1. é™æ€é¡µé¢æµ‹è¯•</h3>
            <p class="success">âœ… å¦‚æœä½ èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜é™æ€æ–‡ä»¶éƒ¨ç½²æ­£å¸¸ï¼</p>
        </div>
        
        <div class="test-result">
            <h3>2. å‡½æ•°æµ‹è¯•</h3>
            <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æµ‹è¯•Netlifyå‡½æ•°æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š</p>
            <button onclick="testFunction()">æµ‹è¯•ä»£ç†å‡½æ•°</button>
            <div id="function-result"></div>
        </div>
        
        <div class="test-result">
            <h3>3. ä»£ç†åŠŸèƒ½æµ‹è¯•</h3>
            <p>æµ‹è¯•ä»£ç†åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼š</p>
            <button onclick="testProxy()">æµ‹è¯•ä»£ç†åˆ° httpbin.org</button>
            <div id="proxy-result"></div>
        </div>
        
        <div class="test-result">
            <h3>4. éƒ¨ç½²ä¿¡æ¯</h3>
            <p><strong>éƒ¨ç½²æ—¶é—´ï¼š</strong> <span id="deploy-time"></span></p>
            <p><strong>ç«™ç‚¹URLï¼š</strong> <span id="site-url"></span></p>
        </div>
        
        <h2>ğŸ”§ å¦‚æœæµ‹è¯•å¤±è´¥</h2>
        <ol>
            <li>æ£€æŸ¥Netlifyæ§åˆ¶å°çš„éƒ¨ç½²æ—¥å¿—</li>
            <li>ç¡®ä¿æ‰€æœ‰æ–‡ä»¶éƒ½å·²æ­£ç¡®ä¸Šä¼ </li>
            <li>æ£€æŸ¥netlify.tomlé…ç½®</li>
            <li>é‡æ–°éƒ¨ç½²é¡¹ç›®</li>
        </ol>
        
        <h2>ğŸ“ è·å–å¸®åŠ©</h2>
        <p>å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
        <ul>
            <li>ä½ çš„Netlifyç«™ç‚¹URL</li>
            <li>éƒ¨ç½²æ—¥å¿—æˆªå›¾</li>
            <li>é”™è¯¯é¡µé¢çš„x-nf-request-id</li>
        </ul>
    </div>

    <script>
        // æ˜¾ç¤ºéƒ¨ç½²ä¿¡æ¯
        document.getElementById('deploy-time').textContent = new Date().toLocaleString();
        document.getElementById('site-url').textContent = window.location.origin;
        
        // æµ‹è¯•å‡½æ•°
        async function testFunction() {
            const resultDiv = document.getElementById('function-result');
            resultDiv.innerHTML = '<p>æ­£åœ¨æµ‹è¯•...</p>';
            
            try {
                const response = await fetch('/.netlify/functions/proxy');
                const text = await response.text();
                
                if (response.ok) {
                    resultDiv.innerHTML = '<p class="success">âœ… å‡½æ•°éƒ¨ç½²æ­£å¸¸ï¼</p>';
                } else {
                    resultDiv.innerHTML = `<p class="error">âŒ å‡½æ•°è¿”å›é”™è¯¯: ${response.status}</p><pre>${text}</pre>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<p class="error">âŒ å‡½æ•°æµ‹è¯•å¤±è´¥: ${error.message}</p>`;
            }
        }
        
        // æµ‹è¯•ä»£ç†
        async function testProxy() {
            const resultDiv = document.getElementById('proxy-result');
            resultDiv.innerHTML = '<p>æ­£åœ¨æµ‹è¯•ä»£ç†...</p>';
            
            try {
                const response = await fetch('/.netlify/functions/proxy', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-request-line': 'GET https://httpbin.org/get HTTP/1.1'
                    }
                });
                const text = await response.text();
                
                if (response.ok) {
                    resultDiv.innerHTML = '<p class="success">âœ… ä»£ç†åŠŸèƒ½æ­£å¸¸ï¼</p><pre>' + text.substring(0, 200) + '...</pre>';
                } else {
                    resultDiv.innerHTML = `<p class="error">âŒ ä»£ç†æµ‹è¯•å¤±è´¥: ${response.status}</p><pre>${text}</pre>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<p class="error">âŒ ä»£ç†æµ‹è¯•å¤±è´¥: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html> 